{% extends "basic.html" %}

{% block title %}🌊 Hệ thống giám sát đuối nước{% endblock %}

{% block content %}
<h1 class="title">🌊 Hệ thống giám sát đuối nước</h1>

<!-- Đèn cảnh báo -->
<div class="status-container">
    <div id="status-green" class="status-light green active">✅ Bình thường</div>
    <div id="status-red" class="status-light red">🚨 Nguy hiểm</div>
</div>

<!-- Camera trực tiếp -->
<div class="camera-container">
    <h2>📹 Camera trực tiếp</h2>
    <img src="{{ url_for('views.video_feed') }}">
</div>

<script>
    function updateStatus(isDrowning) {
        const greenLight = document.getElementById('status-green');
        const redLight = document.getElementById('status-red');

        if (isDrowning) {
            greenLight.classList.remove('active');
            redLight.classList.add('active');
        } else {
            redLight.classList.remove('active');
            greenLight.classList.add('active');
        }
    }
</script>

<style>
    /* Cơ bản */
    body {
        margin: 0;
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(to right, #1e3c72, #2a5298);
        color: #fff;
        line-height: 1.6;
    }

    .title {
        text-align: center;
        font-size: 2.5rem;
        margin: 20px 0;
    }

    /* Đèn cảnh báo */
    .status-container {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 20px 0;
    }

    .status-light {
        padding: 20px;
        border-radius: 50%;
        text-align: center;
        font-weight: bold;
        width: 120px;
        opacity: 0.5;
        transition: transform 0.3s;
    }

    .status-light.active {
        transform: scale(1.2);
        opacity: 1;
    }

    .green {
        background-color: #28a745;
    }

    .red {
        background-color: #dc3545;
    }

    /* Bố cục chính */
    .layout-container {
        display: flex;
        height: 80vh;
        gap: 20px;
    }

</style>

{% endblock %}
<!-- Khu vực tải video
<div class="upload-container">
    <h2>Tải video mới lên</h2>
    <form id="uploadForm" action="{{ url_for('views.upload_video') }}" method="POST" enctype="multipart/form-data" class="upload-form">
        <input type="file" name="video" accept="video/*" required>
        <button type="submit" class="upload-btn">Tải lên 📤</button>
    </form>
</div>

 Khu vực hiển thị video 
<div class="layout-container">
    <div class="video-grid" id="video-display">
        {% if videos_paths %}
            {% for video in videos_paths %}
                <img id="video-{{ loop.index0 }}" 
                     src="{{ url_for('views.video_feed', video_index=loop.index0) }}" 
                     class="video-thumbnail" 
                     data-index="{{ loop.index0 }}">
            {% endfor %}
        {% else %}
            <p class="no-video">Không có video nào được tải lên.</p>
        {% endif %}
    </div>

    Danh sách nút chọn video
    <div class="controls-section">
        <h3>🎥 Chọn video</h3>
        {% for video in videos_paths %}
            <button id="btn-{{ loop.index0 }}" onclick="toggleVideo({{ loop.index0 }})">
                Video {{ loop.index }}
            </button>
        {% endfor %}
    </div> -->