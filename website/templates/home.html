{% extends "basic.html" %}

{% block title %}ğŸŒŠ Há»‡ thá»‘ng giÃ¡m sÃ¡t Ä‘uá»‘i nÆ°á»›c{% endblock %}

{% block content %}
<h1 class="title">ğŸŒŠ Há»‡ thá»‘ng giÃ¡m sÃ¡t Ä‘uá»‘i nÆ°á»›c</h1>

<!-- ÄÃ¨n cáº£nh bÃ¡o -->
<div class="status-container">
    <div id="status-green" class="status-light green active">âœ… BÃ¬nh thÆ°á»ng</div>
    <div id="status-red" class="status-light red">ğŸš¨ Nguy hiá»ƒm</div>
</div>

<!-- Camera trá»±c tiáº¿p -->
<div class="camera-container">
    <h2>ğŸ“¹ Camera trá»±c tiáº¿p</h2>
    <img src="{{ url_for('views.video_feed') }}">
</div>

<script>
    function updateStatus(isDrowning) {
        const greenLight = document.getElementById('status-green');
        const redLight = document.getElementById('status-red');

        if (isDrowning) {
            greenLight.classList.remove('active');
            redLight.classList.add('active');
        } else {
            redLight.classList.remove('active');
            greenLight.classList.add('active');
        }
    }
</script>

<style>
    /* CÆ¡ báº£n */
    body {
        margin: 0;
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(to right, #1e3c72, #2a5298);
        color: #fff;
        line-height: 1.6;
    }

    .title {
        text-align: center;
        font-size: 2.5rem;
        margin: 20px 0;
    }

    /* ÄÃ¨n cáº£nh bÃ¡o */
    .status-container {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 20px 0;
    }

    .status-light {
        padding: 20px;
        border-radius: 50%;
        text-align: center;
        font-weight: bold;
        width: 120px;
        opacity: 0.5;
        transition: transform 0.3s;
    }

    .status-light.active {
        transform: scale(1.2);
        opacity: 1;
    }

    .green {
        background-color: #28a745;
    }

    .red {
        background-color: #dc3545;
    }

    /* Bá»‘ cá»¥c chÃ­nh */
    .layout-container {
        display: flex;
        height: 80vh;
        gap: 20px;
    }

</style>

{% endblock %}
<!-- Khu vá»±c táº£i video
<div class="upload-container">
    <h2>Táº£i video má»›i lÃªn</h2>
    <form id="uploadForm" action="{{ url_for('views.upload_video') }}" method="POST" enctype="multipart/form-data" class="upload-form">
        <input type="file" name="video" accept="video/*" required>
        <button type="submit" class="upload-btn">Táº£i lÃªn ğŸ“¤</button>
    </form>
</div>

 Khu vá»±c hiá»ƒn thá»‹ video 
<div class="layout-container">
    <div class="video-grid" id="video-display">
        {% if videos_paths %}
            {% for video in videos_paths %}
                <img id="video-{{ loop.index0 }}" 
                     src="{{ url_for('views.video_feed', video_index=loop.index0) }}" 
                     class="video-thumbnail" 
                     data-index="{{ loop.index0 }}">
            {% endfor %}
        {% else %}
            <p class="no-video">KhÃ´ng cÃ³ video nÃ o Ä‘Æ°á»£c táº£i lÃªn.</p>
        {% endif %}
    </div>

    Danh sÃ¡ch nÃºt chá»n video
    <div class="controls-section">
        <h3>ğŸ¥ Chá»n video</h3>
        {% for video in videos_paths %}
            <button id="btn-{{ loop.index0 }}" onclick="toggleVideo({{ loop.index0 }})">
                Video {{ loop.index }}
            </button>
        {% endfor %}
    </div> -->